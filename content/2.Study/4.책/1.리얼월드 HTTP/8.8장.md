# 8장

# RESTful API

## 1. RESTful API

REST, Representational State Trandfer

HTTP 의 신택스를 프로토콜의 토대로 사용 - API 가 웹 서버를 통해 제공됨 - GET/path/path 와 같은 방식으로 경로에 메서드롤 보내 서비스를 얻는다 - API 의 성공, 실패를 status code 로 클라이언트에 알려줌 - URL 은 리소스의 위치를 나타내는 표현이자 서비스의 얼굴이다 - 필요에 따라 GET, POST 에 매개변수, 바디를 추가한다 - 서버에서 오는 반환값은 JSON, XML 과 같은 구조화된 텍스트나 이미지 데이터를 사용한다

클라이언트의 관점에서 서버에 기대할 수 있는 것들 - URL 은 리소스의 계층을 나타내며 명사로 구성되어있음 - 리소스에 대해 HTTP 메서드를 보내 리소스 취득, 갱신, 추가 등의 작업을 한다 - 스테이터스 코드를 보고 요청한 작업의 상태를 알 수 있다 - GET 메서드는 여러번 호출해도 상태를 변경하지 않는다 - 클라이언트는 관리해야 할 상태가 존재하지 않고, 매번 요청을 독립적으로 발행할 수 있다 - 트랜잭션은 존재하지 않는다

위와같은 REST 원칙을 준수한 것을 RESTful 하다고 표현한다

### REST API 와 RPC 의 차이

RCP - 요청 시 서비스 이름과 메서드 를 전달해 **무엇을 할것인가** 를 지정 - 호출하는 URL은 하나 - HTTP 메서드는 모두 POST - 서버에 대한 요청 사항들은 바디에 넣어 보내짐 - 메타데이터와 데이터가 똑같이 취급

REST - 정보를 갱신할 때 수정된 리소스를 첨부하여 **이걸로 덮어써라** 하고 전송 - GET 으로 가져올 수 있는 데이터를 제외한 모든 데이터는 메타데이터 - 메타데이터의 취득과 수정은 헤더로 이루어짐

### Web API 와 트랜잭션

### HATEOAS

Hypermedia As The Engine Of Application State REST 의 일부인 **인터페이스의 일반화** 를 사양으로 만든 것

### RESTful 과 REST-ish

기본적으로 REST 를 지키며 완전히 RESTful 하기 힘든 경우일 경우 REST 스타일 이란 뜻으로 REST-ish 라고 부름

## 2. 메서드

- GET
    - 데이터 취득
- POST
    - 데이터 신규 작성
- PUT
    - 데이터 갱신(리소스가 이미 있는 경우)
- DELETE
    - 리소스 삭제
- PATCH
    - 차이에 따른 데이터 갱신(리소스가 이미 있는 경우)
- HEAD
    - GET 에서 바디를 뺀 헤더부분
- OPTIONS
    - 사용할 수 있는 메서드 목록, CORS 에서 사용

## 3. 스테이터스 코드

### 100 번대 (정보)

성공이나 실패가 결정되기 이전의 상태

### 200 번대 (성공)

정상종료 되었을 때

### 300 번대 (리다이렉트)

리다이렉션 및 캐시의 변경이 없을때의 통지

### 400 번대 (클라이언트 오류)

클라이언트에서 기인하는 오류들 요청하는 URL 이 틀렸다던가 헤더가 부족하던가 바디의 형식이 틀렸을때

### 500 번대 (서버 오류)

서버에서의 오류 클라이언트에서 할 수 있는것이 없으므로 기다려야함

## 4. 바디

응답 바디에는 서버로 부터 반환된 정보가 저장 됨

## 5. REST API 에 액세스할 때 주의할 점

- 타임아웃
- 액세스 수 제한
    - 1초당 호출 횟수의 상한이 정해져 있음
    - 이 이상의 요청을 보내게 되면 `Rate Limit Exceede` 와 같은 오류가 반환됨