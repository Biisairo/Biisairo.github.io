# memory

## **메모리 할당**

### **특정 크기보다 작은 메모리의 할당**

size class 를 사용

- heap 에 특정 크기별로 사이즈를 나눠 놓은 블럭을 준비 해 둔다

- 8, 16, 32 .... 32768 바이트로 대략 32kb 까지

- 이 준비해 둔 메모리 블럭을 span 이라고 한다

- 각각의 span 은 페이지 단위로 되어있다

- gc 에서는 span 을 확인하여 marking 한다

- 할당하는 메모리가 size class 로 할당이 가능하면 span 하나를 바로 할당한다
- 할당하는 메모리가 size class 로 할당이 불가능하면 페이지 단위로 바로 할당한다
- 이 과정에서 span 에는 내부 파편화, size class 를 사용하지 않는 메모리들의 할당/해제로 인한 외부 파편화가 생길 수 있다